"use strict";!function(i){let l=window.location.search.replace("?","").split("&").reduce((function(i,l){let e=l.split("=");return i[decodeURIComponent(e[0])]=decodeURIComponent(e[1]),i}),{}),e=i(".form-company"),d=i(".filter-type input"),a=i(".filter-people input"),t=i(".filter-task input"),n=i(".hi-title"),s=i(".hi-location"),c=i(".paginator");function _catalogError(l){i(".company-ul").html('<span class="wow fadeIn vac-error">Упс! Возникла непредвиденная ошибка</span>'),console.log(l)}function _changePage(l){l.preventDefault(),l.stopPropagation();let e=i(l.target).parent("div");c.find("div").removeClass("page-active"),e.addClass("page-active"),_getData(e.attr("data-page")),e.addClass("page-active"),i("html, body").animate({scrollTop:0},0)}function _getData(d=1,a=l.key||""){i(".hs-bth").attr("disabled","true"),i(".filter-load").fadeIn(10),i(".filter-bth-none").text("Загрузка..."),i(".section-header").html('<span><div class="placeholder-item jx-title"></div></span>'),i(".company-ul").html(' <div id="placeholder-main">\n <div class="placeholder placeholder-flex">\n <div style="width: 100%;">\n <div class="placeholder-item mx-little"></div>\n <div class="placeholder-item mx-little-2"></div>\n <div class="placeholder-item mx-bigger"></div>\n <div class="placeholder-item mx-middle"></div>\n <div class="placeholder-item mx-middle-2"></div>\n <div class="mx-flex">\n <div class="placeholder-item mx-flit"></div>\n <div class="placeholder-item mx-flit"></div>\n </div>\n </div>\n <div class="placeholder-item pasi-img">\n\n </div>\n </div>\n <div class="placeholder placeholder-flex">\n <div style="width: 100%;">\n <div class="placeholder-item mx-little"></div>\n <div class="placeholder-item mx-bigger"></div>\n <div class="placeholder-item mx-middle"></div>\n <div class="placeholder-item mx-middle-2"></div>\n <div class="mx-flex">\n <div class="placeholder-item mx-flit"></div>\n <div class="placeholder-item mx-flit"></div>\n </div>\n </div>\n <div class="placeholder-item pasi-img">\n\n </div>\n </div>\n <div class="placeholder placeholder-flex">\n <div style="width: 100%;">\n <div class="placeholder-item mx-little"></div>\n <div class="placeholder-item mx-bigger"></div>\n <div class="placeholder-item mx-middle"></div>\n <div class="placeholder-item mx-middle-2"></div>\n <div class="mx-flex">\n <div class="placeholder-item mx-flit"></div>\n <div class="placeholder-item mx-flit"></div>\n </div>\n </div>\n <div class="placeholder-item pasi-img">\n\n </div>\n </div>\n <div class="placeholder placeholder-flex">\n <div style="width: 100%;">\n <div class="placeholder-item mx-little"></div>\n <div class="placeholder-item mx-bigger"></div>\n <div class="placeholder-item mx-middle"></div>\n <div class="placeholder-item mx-middle-2"></div>\n <div class="mx-flex">\n <div class="placeholder-item mx-flit"></div>\n <div class="placeholder-item mx-flit"></div>\n </div>\n </div>\n <div class="placeholder-item pasi-img">\n\n </div>\n </div>\n <div class="placeholder placeholder-flex">\n <div style="width: 100%;">\n <div class="placeholder-item mx-little"></div>\n <div class="placeholder-item mx-bigger"></div>\n <div class="placeholder-item mx-middle"></div>\n <div class="placeholder-item mx-middle-2"></div>\n <div class="mx-flex">\n <div class="placeholder-item mx-flit"></div>\n <div class="placeholder-item mx-flit"></div>\n </div>\n </div>\n <div class="placeholder-item pasi-img">\n\n </div>\n </div>\n <div class="placeholder placeholder-flex">\n <div style="width: 100%;">\n <div class="placeholder-item mx-little"></div>\n <div class="placeholder-item mx-bigger"></div>\n <div class="placeholder-item mx-middle"></div>\n <div class="placeholder-item mx-middle-2"></div>\n <div class="mx-flex">\n <div class="placeholder-item mx-flit"></div>\n <div class="placeholder-item mx-flit"></div>\n </div>\n </div>\n <div class="placeholder-item pasi-img">\n\n </div>\n </div>\n <div class="placeholder placeholder-flex">\n <div style="width: 100%;">\n <div class="placeholder-item mx-little"></div>\n <div class="placeholder-item mx-bigger"></div>\n <div class="placeholder-item mx-middle"></div>\n <div class="placeholder-item mx-middle-2"></div>\n <div class="mx-flex">\n <div class="placeholder-item mx-flit"></div>\n <div class="placeholder-item mx-flit"></div>\n </div>\n </div>\n <div class="placeholder-item pasi-img">\n\n </div>\n </div>\n <div class="placeholder placeholder-flex">\n <div style="width: 100%;">\n <div class="placeholder-item mx-little"></div>\n <div class="placeholder-item mx-bigger"></div>\n <div class="placeholder-item mx-middle"></div>\n <div class="placeholder-item mx-middle-2"></div>\n <div class="mx-flex">\n <div class="placeholder-item mx-flit"></div>\n <div class="placeholder-item mx-flit"></div>\n </div>\n </div>\n <div class="placeholder-item pasi-img">\n\n </div>\n </div>\n </div>');let t=`page=${+d}&limit=20&key=${a}&loc=${s.val()}&${e.serialize()}`;setTimeout((function(){i.ajax({url:"/scripts/filter-company",data:t,type:"POST",cache:!1,dataType:"json",error:_catalogError,success:function(l){"success"===l.code?(i(".company-ul").html(""),i(".filter-load").fadeOut(10),i(".hs-bth").removeAttr("disabled"),function _catalogSuccess(l){i(".hs-bth").val("Поиск..."),i(".section-header").html(`Найдено ${l.data.countAll} компаний`),i(".filter-bth-none").text(`Показать ${l.data.countAll}`);i(".company-ul").html(l.data.list);i(".hs-bth").val("Найти")}(l),function _renderPagination({page:i,limit:l,countAll:e,pagination:d}){Math.ceil(e/l),c.html(d)}({page:d,limit:20,countAll:l.data.countAll,pagination:l.data.pagination})):_catalogError(l)}})}),1e3)}i(".hs-bth").on("click",(function(){_getData(1,n.val())})),function init(){_getData(1),function _bindHandlers(){d.on("change",_getData),a.on("change",_getData),t.on("change",_getData),c.on("click","a",_changePage)}()}()}(jQuery);